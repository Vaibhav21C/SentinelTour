<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Update - Tourist Portal</title>
    <meta name="description" content="Update your health information for safe travel">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Health questionnaire styling */
        .health-dashboard {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }
        .health-header {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        .health-header h1,
        .health-header p {
            color: white !important;
        }
        .health-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 2rem;
        }
        /* Ensure all text is black */
        .health-card h4,
        .health-card .form-label,
        .health-card .form-check-label,
        .health-card p,
        .health-card span,
        .health-card div {
            color: #000000 !important;
        }
        .question-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #6c757d;
        }
        .health-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }
    </style>
</head>
<body class="health-dashboard">
    <!-- Health Header -->
    <div class="health-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <div class="d-flex align-items-center mb-3">
                        <div class="health-icon me-3">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div>
                            <h1 class="display-5 fw-bold mb-0">Health Information Update</h1>
                        </div>
                    </div>
                    <p class="lead mb-0">Please provide your current health information for safe travel planning</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <button class="btn btn-outline-light" onclick="goBackToDashboard()">
                        <i class="fas fa-arrow-left me-2"></i> Back to Dashboard
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="health-card">
                    <form id="healthForm">
                        <!-- Blood Group Section -->
                        <div class="question-section">
                            <h4 class="fw-bold mb-3">
                                <i class="fas fa-tint text-danger me-2"></i>
                                Blood Group Information
                            </h4>
                            <div class="mb-3">
                                <label for="bloodGroup" class="form-label fw-semibold">What is your blood group?</label>
                                <select class="form-select" id="bloodGroup" name="bloodGroup" required>
                                    <option value="" selected disabled>Select your blood group</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                    <option value="unknown">Don't know</option>
                                </select>
                            </div>
                        </div>

                        <!-- Diabetes Section -->
                        <div class="question-section">
                            <h4 class="fw-bold mb-3">
                                <i class="fas fa-cube text-primary me-2"></i>
                                Diabetes Information
                            </h4>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Are you diabetic?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="diabetes" id="diabetesYes" value="yes">
                                    <label class="form-check-label" for="diabetesYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="diabetes" id="diabetesNo" value="no">
                                    <label class="form-check-label" for="diabetesNo">No</label>
                                </div>
                            </div>
                            <div class="mb-3" id="diabetesDetails" style="display: none;">
                                <label for="diabetesType" class="form-label">Type of diabetes:</label>
                                <select class="form-select" id="diabetesType" name="diabetesType">
                                    <option value="">Select type</option>
                                    <option value="type1">Type 1</option>
                                    <option value="type2">Type 2</option>
                                    <option value="gestational">Gestational</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>

                        <!-- Thyroid Section -->
                        <div class="question-section">
                            <h4 class="fw-bold mb-3">
                                <i class="fas fa-user-md text-success me-2"></i>
                                Thyroid Information
                            </h4>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Do you have thyroid problems?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="thyroid" id="thyroidYes" value="yes">
                                    <label class="form-check-label" for="thyroidYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="thyroid" id="thyroidNo" value="no">
                                    <label class="form-check-label" for="thyroidNo">No</label>
                                </div>
                            </div>
                            <div class="mb-3" id="thyroidDetails" style="display: none;">
                                <label for="thyroidType" class="form-label">Type of thyroid condition:</label>
                                <select class="form-select" id="thyroidType" name="thyroidType">
                                    <option value="">Select type</option>
                                    <option value="hyperthyroid">Hyperthyroidism</option>
                                    <option value="hypothyroid">Hypothyroidism</option>
                                    <option value="goiter">Goiter</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>

                        <!-- Other Diseases Section -->
                        <div class="question-section">
                            <h4 class="fw-bold mb-3">
                                <i class="fas fa-notes-medical text-warning me-2"></i>
                                Other Medical Conditions
                            </h4>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Do you have any other specific diseases or medical conditions?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="otherDiseases" id="otherDiseasesYes" value="yes">
                                    <label class="form-check-label" for="otherDiseasesYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="otherDiseases" id="otherDiseasesNo" value="no">
                                    <label class="form-check-label" for="otherDiseasesNo">No</label>
                                </div>
                            </div>
                            <div class="mb-3" id="otherDiseasesDetails" style="display: none;">
                                <label for="diseasesList" class="form-label">Please specify your medical conditions:</label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="hypertension" name="conditions" value="hypertension">
                                            <label class="form-check-label" for="hypertension">Hypertension (High BP)</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="heartDisease" name="conditions" value="heartDisease">
                                            <label class="form-check-label" for="heartDisease">Heart Disease</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="asthma" name="conditions" value="asthma">
                                            <label class="form-check-label" for="asthma">Asthma</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="epilepsy" name="conditions" value="epilepsy">
                                            <label class="form-check-label" for="epilepsy">Epilepsy</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="kidneyDisease" name="conditions" value="kidneyDisease">
                                            <label class="form-check-label" for="kidneyDisease">Kidney Disease</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="liverDisease" name="conditions" value="liverDisease">
                                            <label class="form-check-label" for="liverDisease">Liver Disease</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="arthritis" name="conditions" value="arthritis">
                                            <label class="form-check-label" for="arthritis">Arthritis</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="otherCondition" name="conditions" value="other">
                                            <label class="form-check-label" for="otherCondition">Other</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3" id="otherConditionText" style="display: none;">
                                    <textarea class="form-control" id="otherConditionDetails" name="otherConditionDetails" rows="3" placeholder="Please specify other medical conditions..."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Medications Section -->
                        <div class="question-section">
                            <h4 class="fw-bold mb-3">
                                <i class="fas fa-pills text-info me-2"></i>
                                Current Medications
                            </h4>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Are you currently taking any medications?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="medications" id="medicationsYes" value="yes">
                                    <label class="form-check-label" for="medicationsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="medications" id="medicationsNo" value="no">
                                    <label class="form-check-label" for="medicationsNo">No</label>
                                </div>
                            </div>
                            <div class="mb-3" id="medicationsDetails" style="display: none;">
                                <label for="medicationsList" class="form-label">Please list your current medications:</label>
                                <textarea class="form-control" id="medicationsList" name="medicationsList" rows="4" placeholder="List your medications, dosages, and frequency..."></textarea>
                            </div>
                        </div>

                        <!-- Emergency Contact -->
                        <div class="question-section">
                            <h4 class="fw-bold mb-3">
                                <i class="fas fa-phone text-danger me-2"></i>
                                Emergency Contact
                            </h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="emergencyName" class="form-label fw-semibold">Emergency Contact Name</label>
                                        <input type="text" class="form-control" id="emergencyName" name="emergencyName" placeholder="Full name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="emergencyPhone" class="form-label fw-semibold">Emergency Contact Phone</label>
                                        <input type="tel" class="form-control" id="emergencyPhone" name="emergencyPhone" placeholder="Phone number" required>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="emergencyRelation" class="form-label fw-semibold">Relationship</label>
                                <select class="form-select" id="emergencyRelation" name="emergencyRelation" required>
                                    <option value="" selected disabled>Select relationship</option>
                                    <option value="spouse">Spouse</option>
                                    <option value="parent">Parent</option>
                                    <option value="child">Child</option>
                                    <option value="sibling">Sibling</option>
                                    <option value="friend">Friend</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary btn-lg px-5 py-3">
                                <i class="fas fa-save me-2"></i> Save Health Information
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AOS Animation Library JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS animation
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });

        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = sessionStorage.getItem('userLoggedIn');
            
            if (!isLoggedIn) {
                window.location.href = 'user-login.html';
                return;
            }

            // Load existing health data if available
            loadHealthData();
        });

        // Show/hide conditional fields
        document.querySelectorAll('input[name="diabetes"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const details = document.getElementById('diabetesDetails');
                details.style.display = this.value === 'yes' ? 'block' : 'none';
            });
        });

        document.querySelectorAll('input[name="thyroid"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const details = document.getElementById('thyroidDetails');
                details.style.display = this.value === 'yes' ? 'block' : 'none';
            });
        });

        document.querySelectorAll('input[name="otherDiseases"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const details = document.getElementById('otherDiseasesDetails');
                details.style.display = this.value === 'yes' ? 'block' : 'none';
            });
        });

        document.querySelectorAll('input[name="medications"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const details = document.getElementById('medicationsDetails');
                details.style.display = this.value === 'yes' ? 'block' : 'none';
            });
        });

        document.getElementById('otherCondition').addEventListener('change', function() {
            const otherText = document.getElementById('otherConditionText');
            otherText.style.display = this.checked ? 'block' : 'none';
        });

        // Form submission
        document.getElementById('healthForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const formData = new FormData(this);
            const healthData = {};
            
            // Collect form data
            for (let [key, value] of formData.entries()) {
                if (healthData[key]) {
                    if (Array.isArray(healthData[key])) {
                        healthData[key].push(value);
                    } else {
                        healthData[key] = [healthData[key], value];
                    }
                } else {
                    healthData[key] = value;
                }
            }

            // Save to sessionStorage
            sessionStorage.setItem('userHealthData', JSON.stringify(healthData));
            
            // Show success message
            alert('Health information saved successfully!');
            
            // Redirect back to dashboard
            window.location.href = 'user-dashboard.html';
        });

        // Load existing health data
        function loadHealthData() {
            const healthData = sessionStorage.getItem('userHealthData');
            if (healthData) {
                const data = JSON.parse(healthData);
                
                // Populate form fields
                Object.keys(data).forEach(key => {
                    const element = document.querySelector(`[name="${key}"]`);
                    if (element) {
                        if (element.type === 'radio') {
                            const radio = document.querySelector(`[name="${key}"][value="${data[key]}"]`);
                            if (radio) radio.checked = true;
                        } else if (element.type === 'checkbox') {
                            if (Array.isArray(data[key])) {
                                data[key].forEach(value => {
                                    const checkbox = document.querySelector(`[name="${key}"][value="${value}"]`);
                                    if (checkbox) checkbox.checked = true;
                                });
                            }
                        } else {
                            element.value = data[key];
                        }
                    }
                });

                // Trigger change events to show conditional fields
                document.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
                    radio.dispatchEvent(new Event('change'));
                });
            }
        }

        // Go back to dashboard
        function goBackToDashboard() {
            window.location.href = 'user-dashboard.html';
        }
    </script>
</body>
</html>
